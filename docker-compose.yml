version: '3'

services:
   app:  &python
      build: 
         context: .
         dockerfile: docker/app/Dockerfile
      restart: always
      ports:
         - '8000:8000'
      volumes:
         - ./:/app 
      environment:
         - PYTHONUNBUFFERED=1
      command: bash -c "python3 /app/manage.py makemigrations && python3 /app/manage.py migrate && python3 /app/manage.py runserver 0.0.0.0:8000"
      deploy:
         resources:
           limits:
             memory: 16G


